!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=0)}([function(e,t,n){"use strict";t.__esModule=!0;var r=n(1),o=n(2),i=n(3),u=n(5);o.promises.readFile("mcmanus.json").then((function(e){return JSON.parse(e.toString())})).then((function(e){return e.realm?i.login(e.username,e.password).then((function(t){return t.worlds().then((function(n){var r=n.servers.find((function(t){return t.name===e.realm}));return r?t.join(r.id):Promise.reject("realm not found")})).then((function(t){var n=t.address.split(":");return e.host=n[0],e.port=parseInt(n[1]),e}))})):e})).then((function(e){return console.log("joining",{realm:e.realm,address:e.host+":"+e.port}),function(e){e.logErrors=!0,e.version=i.MC_VERSION;var t=r.createBot(e);return new Promise((function(e,n){t.on("chat",(function(e,n,r,o,i){if(e!=t.username){var u=n.trim().split(" ");if("mcmanus"===u[0].toLowerCase())if(1!==u.length)switch(u[1]){case"coords":t.chat(t.player.entity.position.floored().toString());break;case"echo":t.chat(u.slice(2).join(" "));break;case"help":t.chat("coords | echo | help");break;default:t.chat("wat? "+n)}else t.chat("what?")}})),t.on("login",(function(){return console.log("logged in")})),t.on("kicked",(function(e,t){console.log(e,t),n(e)})),t.on("error",(function(e){console.log(e),n(e)}))}))}(e)})).catch((function(e){console.log(e),u.exit(1)}))},function(e,t){e.exports=require("mineflayer")},function(e,t){e.exports=require("fs")},function(e,t,n){"use strict";t.__esModule=!0,t.login=t.RealmsClient=t.MC_VERSION=void 0;var r=n(4);t.MC_VERSION="1.16.2";var o=function(){function e(e,n){this.accessToken=e,this.profile=n,this.cookie="sid=token:"+e+":"+n.id+";user="+n.name+";version="+t.MC_VERSION}return e.prototype.get=function(e){return r.default("https://pc.realms.minecraft.net"+e,{headers:{Cookie:this.cookie}})},e.prototype.getText=function(e){return this.get(e).then((function(e){return 200!=e.status?e.text().then((function(e){return Promise.reject(e)})):e.text()}))},e.prototype.getJSON=function(e){return this.getText(e).then((function(e){return JSON.parse(e)}))},e.prototype.available=function(){return this.getText("/mco/available").then((function(e){return"true"===e.trim()}))},e.prototype.compatible=function(){return this.getText("/mco/client/compatible").then((function(e){switch(e=e.trim()){case"OUTDATED":return"OUTDATED";case"OTHER":return"OTHER";case"COMPATIBLE":return"COMPATIBLE";default:return Promise.reject(e)}}))},e.prototype.worlds=function(){return this.getJSON("/worlds")},e.prototype.join=function(e){return this.getJSON("/worlds/v1/"+e+"/join/pc")},e}();t.RealmsClient=o,t.login=function(e,t){var n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t,clientToken:"mcmanus-token",agent:{name:"Minecraft",version:1}})};return r.default("https://authserver.mojang.com/authenticate",n).then((function(e){return 200!=e.status?e.json().then((function(e){return Promise.reject(e)})):e.json()})).then((function(e){return new o(e.accessToken,e.selectedProfile)}))}},function(e,t){e.exports=require("node-fetch")},function(e,t){e.exports=require("process")}]);
//# sourceMappingURL=mcmanus.js.map